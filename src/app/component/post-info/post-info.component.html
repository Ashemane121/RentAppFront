<div class="main">
    <div class="post-info-main">
        <div class="post-info-carousel">
            <ngb-carousel *ngIf="images">
                <ng-template ngbSlide *ngFor="let image of images">
                    <div class="picsum-img-wrapper">
                        <img [src]="image" alt="Random slide" />
                    </div>
                </ng-template>
            </ngb-carousel>
        </div>
        <h1>{{ currentPost.brand}} {{ currentPost.model }}</h1>
        <p>localisation</p>
        <p>{{ currentPost.year }}</p>
        <p *ngIf="rate"><ngb-rating [rate]="1" [max]="1"></ngb-rating>{{ rate }}</p>
        <p *ngIf="!rate"><ngb-rating [rate]="1" [max]="1"></ngb-rating>Pas encore d'évaluations</p>
    </div>
    <div class="post-info-box post-info-description">
        <h2>Description du véhicule</h2>
        <p>{{ currentPost.description }}</p>
    </div>

    <div class="post-info-rent">
        <div class="post-info-rent-price">
            <h1>{{ currentPost.price }}dt</h1>
            <p>/jour</p>
        </div>
        <div class="post-info-rent-button">
            <button *ngIf="!isLoggedIn" routerLink="/login">
                Réserver
            </button>
            <button *ngIf="isLoggedIn && !isOwned" (click)="createRental(currentPost.id_post)">
                Réserver
            </button>
            <div *ngIf="isOwned">
                <p>Il s'agit de votre véhicule</p>
            </div>
        </div>
    </div>

    <div class="post-info-box post-info-conditions">
        <h2>Condition du propriétaire</h2>
        <p>{{ currentPost.conditions }}</p>
    </div>
    <div class="post-info-box post-info-details">
        <div>
            <h3><img src="assets/engine.png"> Moteur</h3>
            <p>{{ currentPost.fuel }}</p>
        </div>
        <div>
            <h3><img src="assets/gearbox.png"> Boite</h3>
            <p>{{ currentPost.gearbox }}</p>
        </div>
        <div>
            <h3><img src="assets/speedmeter.png"> Compteur</h3>
            <p>{{ currentPost.mileage }}</p>
        </div>
    </div>
    <div class="post-info-box post-info-options">
        <div>
            <p>Moteur</p>
            <p>{{ currentPost.fuel }}</p>
        </div>
        <div>
            <p>Boite</p>
            <p>{{ currentPost.gearbox }}</p>
        </div>
        <div>
            <p>Compteur</p>
            <p>{{ currentPost.mileage }}</p>
        </div>
    </div>
    
    <div class="post-info-box post-info-calendar">
        <p>Date de début :{{ currentPost.start_date }}</p>
        <p>Date de fin :{{ currentPost.end_date }}</p>
        <div class="">
            <ngb-datepicker
              name="datepicker"
              ngbDatepicker
              #datepicker="ngbDatepicker"
              [displayMonths]="2"
              [dayTemplate]="t"
              [weekdays]="false"
              [outsideDays]="'hidden'"
              navigation="arrows"
              tabindex="-1"
            />
            <ng-template #t let-date let-focused="focused">
              <span
                class="custom-day"
                [class.disabled]="isDisabled(date)"
                [class.rent]="isRent(date)"
              >
                {{ date.day }}
              </span>
            </ng-template>
        </div>
    </div>

    <div class="post-info-box post-info-ratings">
        <h2>Évaluations des locataires</h2>
        <p *ngIf="ratingsWithComments.length===0">Aucun commentaire pour ce véhicule</p>
        <div *ngFor="let rating of ratingsWithComments" class="">
            <ngb-rating [rate]="rating.stars" [max]="5"></ngb-rating>
            <p>{{ rating.comment }}</p>
        </div>
    </div>
</div>

  